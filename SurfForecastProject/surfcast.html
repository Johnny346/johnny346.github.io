<!DOCTYPE html>
<html lang="en">
<head>
	<title>Project Surfcast</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<link href="http://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
	<link href="http://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"/>
	<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto'>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link href="css/style.css" rel="stylesheet" type="text/css">
</head>
<body id="myPage" data-spy="scroll" data-target=".navbar" data-offset="60">
<div class="page">
	<nav class="navbar navbar-default navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#myPage">Project:<span class="orangeText"> SURFCAST</span></a>
			</div>
			<div class="collapse navbar-collapse" id="myNavbar">
				<ul class="nav navbar-nav">
					<li><a href="#description">DESCRIPTION</a></li>
					<li><a href="#details">DETAILS</a></li>
					<li><a href="#demo">DEMO</a></li>
					<li><a href="#components">COMPONENTS</a></li>
					<li><a href="#build">BUILD</a></li>
					<li><a href="#code">CODE</a></li>
					<li><a href="#conclusion">CONCLUSION</a></li>
				</ul>
			</div>
		</div>
	</nav>
	<div class="jumbotron text-center">
		<h1>Project:<span class="orangeText"> SURFCAST</span></h1>
		<h3 class="color-white">An LED Lamp which enables you to instantly be informed about the local surf forecast<br> In an unobtrusive way, while seamlessly integrating into your daily routine</h3>
		<p><a href="https://github.com/Johnny346"><i class="fa fa-git"></i></a>  John Mulcahy</p>
	</div>
	<!-- Container (description Section) -->
	<div id="description" class="container-fluid">
		<div class="row">
			<div class="col-sm-4">
				<img class="img-responsive" src="images/main4.JPG" width="320px" height="500px">
			</div>
			<div class="col-sm-8">
				<h2>Description</h2>
				<hr>
				<h3>This is a Raspberry Pi Project</h3>
				<p class="color-black description-p">
					The Raspberry Pi is a mini computer which is designed to be lightweight and cheap but almost a fully functional computer. This makes it perfect for small projects such as this.<br>
					The Surfcast project is designed for surfers or any water sport enthusiast, whether your miles from the beach or always feel the need to have a connection with the local surf. This lamp will bring the waves to you!
					<br>
					The motion activated lamp will download the most current and accurate local surf forecast and display it using 120 integrated LEDs. Enabling you to effortlessly glanse at this lamp and make a decision to go for a surf.<br>
					There are many ways to get the surf forecast but this lamp makes it almost effortless.
				</p>
				<h3>Accreditation</h3>
				<p>The forecast data generated is done completly by <a href="www.magicseaweed.com">www.magicseaweed.com</a> and full accreditation to there service for this data is given with much appreciation.</p>
			</div>
		</div>
	</div>
	<hr>
	<!-- Container (details Section) -->
	<div id="details" class="container-fluid">
		<div class="row">
			<div class="col-sm-8">
				<h2>Details</h2>
				<div class="">
					<h3>Key features and Functionality</h3>
					<ul class="">
						<li>Motion activated sensor that starts the forecast display, this sensor can be easliy programmed to be triggered after various motion intervals</li>
						<li>Displays a 24 hour surf forecast, a new forecast is fetched through the MagicSeaWeed API once the forecast is older than 24 hours</li>
						<li>A wave set is represented by a row of LEDs which shows the height of the wave by the color it bears and its speed by its motion through the display</li>
						<li>Displays Primary, secondary and combined wave heights and periods between wave sets in 3 hour time blocks, starting from next 3 hours to 24 hours a head</li>
						<li>Has the ability to select multiple beach locations which is dependant by the MagicSeaWeed API service</li>
					</ul>
				</div>
			</div>
			<div class="col-sm-4">
				<br>
				<br>
				<h3>Basically 3 projects in 1!</h3>
				<div>
					<ul class="float-left">
						<li>Retrieve surf forecast API thorugh Java program</li>
						<li>Display forecast to LEDs using Python</li>
						<li>Hardware assembly project</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<hr>
	<!-- Container (demo Section) -->
	<div id="demo" class="container-fluid text-center">
		<h2>Basic demo video</h2>
		<div class="row">
			<div class="col-sm-6">
				<h3>With Cover</h3>
				<iframe src="https://www.youtube.com/embed/Duu7DXayc6g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
			</div>

			<div class="col-sm-6">
				<h3>Without Cover</h3>
				<iframe src="https://www.youtube.com/embed/TQiHtb5B5GU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
			</div>
		</div>
	</div>
	<hr>
	<div class="container-fluid">
		<h3 class="text-center">Reading the display and what it means</h3>
		<div class="row">
			<div class="col-sm-6">
				<img class="img-responsive" src="images/wave-display-graph.png" height="350px" width="550px">
			</div>
			<div class="col-sm-6">
				<p>In general the greater the wave period, the better the swell. The amount of time it takes for two successive wave crests to pass through a determined point is called swell period or wave interval. The swell period is critical surf knowledge because it ultimately measures the quality of the upcoming surf session.</p>
				<p>A wave is represented by  a row of LEDs in the lamp and there colour is determined by the wave height.</p>
				<p>The surf forecast is split into 3 hour time blocks and each time block has a primary swell, secondary swell and combined or average swell to give a total of 3 waves per time block, these period swell values determines the speed of the wave in the lamp to give a feeling of the quality of waves set in the forecast.</p>
			</div>
		</div>
	</div>
	<hr>
	<!-- Container (Components Section) -->
	<div id="components" class="container-fluid container-padding-fix">
		<div class="row">
			<div class="col-sm-6">
				<h2>Components</h2>
					<ul>
						<p>(Links and prices)</p>
						<li>1 X <a href="https://www.adafruit.com/product/3055">Raspberry Pi</a> @ &euro;35.00</li>
						<li>2 X <a href="https://www.adafruit.com/product/2959">Adafruit NeoPixel Digital RGB LED Strip - 60 LED/m </a> @ &euro;24.95 per/m</li>
						<li>1 X <a href="https://www.adafruit.com/product/3174">wires spool diff colors  25ft</a> @ &euro;27.50</li>
						<li>1 X <a href="https://www.adafruit.com/product/189">Motion sensor</a> @ &euro;9.95</li>
						<li>1 X <a href="https://www.adafruit.com/product/1787">74AHCT125 - Quad Level-Shifter (3V to 5V)</a> @ &euro;1.50</li>
						<li>1 X <a href="https://www.adafruit.com/product/658">5V 10A switching power supply</a> @ &euro;25.00</li>
						<li>1 X <a href="https://www.adafruit.com/product/368">Female DC Power adapter - 2.1mm jack to screw terminal block</a> @ &euro;2.00</li>
						<li>1 X <a href="https://www.adafruit.com/product/239">Full sized breadboard</a> @ &euro;5.95</li>
						<li>1 X <a href="https://www.adafruit.com/product/2029">Assembled Pi Cobbler Plus for Pi B+/A+/Pi 2/Pi 3</a> @ &euro;6.95</li>
						<li>1 X <a href="https://www.adafruit.com/product/1609">Adafruit Perma-Proto Half-sized Breadboard PCB - Single</a> @ &euro;4.50</li>
					</ul>
			</div>
			<div class="col-sm-6">
				<h4>Adafruit Neopixel soldering/wiring tutorial, <a href="https://cdn-learn.adafruit.com/downloads/pdf/neopixels-on-raspberry-pi.pdf" download>(PDF download)</a></h4>
				<img class="img-responsive" src="images/soldering-diagram.PNG">
				<br>
			</div>
		</div>
	</div>
	<hr>
	<!-- Container (build Section) -->
	<div id="build" class="container-fluid">
		<h2>Build and Design</h2>
		<div class="row">
			<div class="col-sm-12">
				<img class="img-responsive" src="images/build/b2.jpg">
				<br>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<img class="img-responsive" src="images/build/b4.png">
				<br>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-4">
				<img class="img-responsive" src="images/build/b5.jpg">
			</div>
			<div class="col-sm-4">
				<img class="img-responsive" src="images/build/b7.png">
			</div>
			<div class="col-sm-4">
				<img class="img-responsive" src="images/build/b9.png">
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<br>
				<img class="img-responsive" src="images/build/b8.png">
				<br>
			</div>
		</div>
	</div>
	<hr>
	<!-- Container (code Section) -->
	<div id="code" class="container-fluid">
		<h2>Code Implementation</h2>
		<ul class="nav nav-tabs code-section-tabs">
			<li class="active"><a data-toggle="tab" href="#home">Java code</a></li>
			<li><a data-toggle="tab" href="#menu1">Python code</a></li>
			<li><a data-toggle="tab" href="#menu2">Bash script</a></li>
			<li><a data-toggle="tab" href="#menu3">Code flowchart</a></li>
		</ul>

		<div class="tab-content">
			<div id="home" class="tab-pane active">
				<script src="https://gist.github.com/Johnny346/d28273e1a70eaf2fa04fafd70cbae538.js"></script>
				<h2>Code Discussion</h2><!-- java code section -->
				<p>This java code first checks to see if a previous file with the json forecast data exists and if not creates a new file to be written to. A connection to the magicseaweed website is then tested whether it is accessible or not, if it is then it checks to see how old the previous file is, if its older than 24 hours it will begin to stream the json data in and write it to the file for use by the python script.<br> IF the file is not older than 24 hours it will just use the current file, this ensures that the API service is not called more than once a day which is in the terms of use of the magicseaweed API service. In the end a valid json file should exist.</p>
			</div>
			<div id="menu1" class="tab-pane"><!-- Python code section  -->
				<script src="https://gist.github.com/Johnny346/efcde211faaaca30c969989f1bee3e1d.js"></script>
				<h2>Code Discussion</h2>
				<p>The Python code is the main program which generates the display values to go to the LEDs. After loading the imports it runs a subprocesses which is the java program, running this ensures the json data is current and upto date. The Motion senser is also initialised and the count motion is set to zero.</p>
				<p>The function which are used are defined next such as assignWaveColor function and displayWaveAcion function. It goes into a loop which continuously monitors movement from the motion sensor, when there has been motion for a continuous 15 seconds it begins to gather data from the json file and loop through this while outputting the information to the LEDs. Once the entire json file has been looped through and the display is finished the script is paused for 15 minutes so as not to display agai. Ater this the motion sensor begins again and the prooces starts over.</p>
			</div>
			<div id="menu2" class="tab-pane"><!-- bash code section  -->
				<script src="https://gist.github.com/Johnny346/63688ccc5a5232c98b0c4ad3110043ce.js"></script>
				<h2>Code Discussion</h2>
				<p>This is a simple bash script which runs automatically when the Raspberry Pi is switched on.</p><p>Launching the refresh Network bash script as Raspberry pi losses connection and the network config must be restarted. It navigates to the home directory, then to home/pi/rpi_ws281x/python/examples directory where it executes the python display script.</p>
			</div>
			<div id="menu3" class="tab-pane"><!-- flowchart section  -->
				<img src="images/flowchart.png" class="img-responsive">
			</div>
		</div>
	</div>
	<hr>
	<!-- Container (conclusion Section) -->
	<div id="conclusion" class="container-fluid">
		<div class="row">
			<div class="col-sm-12">
				<h2>Conclusion</h2>

				<p>This was a fun project to make and has a lot of possibilities to add to its functionaltiy as it can display various colours through the leds, further improvement of the wave display will be made by adding more wave details in the display.</p>
				<p>The ability to display other types of weather such as temperature, wind and precipitation is another opportunity to add to this project by implementing another API service and creating a general weather display script</p>
				<h4>Issues in this project:</h4>
				<p>The main issue was the Raspberry Pi's wifi connection which seems to drop out frequently, the main purpose for the wifi is to connect to the API service and also to update the RPIs time from a server on the internet as there is no inbuilt clock hardware on the RPI. To resolve this issue it required running a subprocess which refreshes the network in order to regain connectivity. This is an issue with the Raspberry Pi model B itself as of 02/03/2018.</p>
				<p>The total cost of this project was &euro;130.00</p>
				<p>I hope this project will be useful to other poeple who are interested in building similar projects. If you had any questions send to me at johnmulcahy346@gmail.com</p>
			</div>

		</div>
	</div>
	<footer class="container-fluid text-center">
		<a href="#myPage" title="To Top">
			<span class="glyphicon glyphicon-chevron-up"></span>
		</a>
		<p class="color-about">
			&copy 2018 PROJECT SURFCAST
		</p>
	</footer>

</div>
<script>
	$(document).ready(function(){
		// Add smooth scrolling to all links in navbar + footer link
		$(".navbar a, footer a[href='#myPage']").on('click', function(event) {

		// Prevent default anchor click behavior
		event.preventDefault();

		// Store hash
		var hash = this.hash;

		// Using jQuery's animate() method to add smooth page scroll
		// The optional number (900) specifies the number of milliseconds it takes to scroll to the specified area
		$('html, body').animate({
		scrollTop: $(hash).offset().top
		}, 900, function(){

		// Add hash (#) to URL when done scrolling (default click behavior)
		window.location.hash = hash;
		});
	});

	$(window).scroll(function() {
		$(".slideanim").each(function(){
			var pos = $(this).offset().top;

			var winTop = $(window).scrollTop();
			if (pos < winTop + 600) {
			  $(this).addClass("slide");
			}
			});
		});
	})
</script>
</body>
</html>
