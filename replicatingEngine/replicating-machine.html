<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Self replicator</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
	<style>
	body {
		text-align: center;
		width: 100%;
	}
	#box {
		width: 1180px;
		height: 500px;
		margin-left: 5%;
		border: 1px solid black;
	}
	.innerBoxH {
		width: 49px;
		height: 49px;
		border: 1px solid black;
		border-radius: 50%;
		display: inline-block;
		margin: 1px;
	}
	.innerBoxH:hover {
		background-color: black;
		cursor: pointer;
	}
</style>
</head>
<body>
<div><h1>Self Replicating Machine</h1></div>
<div id="box"></div>

<script type="text/javascript">
	//var userColor = prompt("enter the number of red");
	//var box = document.createElement(addBox());
	var row;
	var color;
	var IDs = [];
	var machine = [];
	var redDivs = [];
	//document.getElementById('box').innerHTML = addbox();
	//creates 9 vertical rows

		addBox();

	//add horizontal rows using unique id for each div
function addBox() {
//start self replicating engine
	var div = document.createElement("div");
	for(var i=0;i<=206;i++) {
		//add dev to id array
		$(div).each(function(){
			IDs.push(this.id);
		});

		//get random colors
		var red = "red";
		var green = "green";
		var blue = "blue";
		var yellow = "yellow";
		var rn = Math.floor(Math.random()*10);
		//assign color to div based on a random number
		if(rn <= 4){
			color = red;
		}else if(rn <=5) {
			color = blue;
		}else if(rn <=8) {
			color = yellow;
		}else {
			color = green;
		}
		//create div element
		div = document.createElement('div');
		div.id = i;
		div.className = "innerBoxH";
		div.style.backgroundColor = color;

		//add event listener to each div element
		div.addEventListener("click", function() {
			//add div to machine array
			$(this).each(function(){
				machine.push(this.id);
			});
			this.style.backgroundColor = "black";
			var nextDiv = this.nextSibling;
			var prevDiv = this.previousSibling;
				//move right
				var nID = this.id;

			//run replicate function
			replicate(nextDiv,prevDiv,nID);
			alert(machine.length);
			alert(redDivs.length);
			})
		//add div to box element
		document.getElementById("box").appendChild(div);
	}

}
alert(IDs.length);

function replicate(nextDiv,prevDiv,nID){
		if (nextDiv.style.backgroundColor == "red"){
				$(this).each(function(){
						machine.push(this.id);
				});

				$(nextDiv).animate({
						backgroundColor: "white"
				}, 1000 );
				$(nextDiv).animate({
						backgroundColor: "black"
				}, 1000 );
		}

		var secondDiv = nextDiv.nextSibling;
			//move right 2
		if (secondDiv.style.backgroundColor == "red"){
				$(this).each(function(){
						machine.push(this.id);
					});
			$(secondDiv).animate({
						backgroundColor: "white"
				}, 1000 );
				$(secondDiv).animate({
						backgroundColor: "black"
				}, 1000 );
				thirdDiv = secondDiv.nextSibling;
				/*//move right 3
					if (thirdDiv.style.backgroundColor == "red"){
						$(this).each(function(){
							machine.push(this.id);
						});
			$(thirdDiv).animate({
								backgroundColor: "white"
						}, 1000 );
						$(thirdDiv).animate({
								backgroundColor: "black"
						}, 1000 );
						secondDiv = nextDiv.nextSibling;
					}
			}*/
		}

		//next left
		if(prevDiv.style.backgroundColor == "red"){
				$(this).each(function(){
					machine.push(this.id);
				});
				$(prevDiv).animate({
						backgroundColor: "white"
				}, 1000 );
				$(prevDiv).animate({
						backgroundColor: "black"
				}, 1000 );
				secondprevDiv = prevDiv.previousSibling;
		}
		/*//move down 1
		var downDiv = nID;
		downDiv = downDiv.match(/d+/g).map(Number);
		dowDiv = parseInt(downDiv) + 100;
		downDiv = "r" + dowDiv;
		var dDiv = document.getElementById(downDiv);
		if (dDiv.style.backgroundColor == "red"){
				$(this).each(function(){
					machine.push(this.id);
				});
			$(dDiv).animate({
						backgroundColor: "white"
				}, 1000 );
				$(dDiv).animate({
						backgroundColor: "black"
				}, 1000 );
				var dowDiv = dowDiv+100;
				var nxt = "r" + dowDiv;
				var  ddDiv = document.getElementById(nxt);
					//move down 2
					if (ddDiv.style.backgroundColor == "red"){
						$(this).each(function(){
							machine.push(this.id);
						});
						$(ddDiv).animate({
								backgroundColor: "white"
						}, 1000 );
						$(ddDiv).animate({
								backgroundColor: "black"
						}, 1000 );
							 dowDiv = dowDiv+100;
							nxt = "r" + dowDiv;
							  ddDiv = document.getElementById(nxt);
								//move down 3
								if (ddDiv.style.backgroundColor == "red"){
										$(this).each(function(){
											machine.push(this.id);
										});
									$(ddDiv).animate({
											backgroundColor: "white"
									}, 1000 );
									$(ddDiv).animate({
											backgroundColor: "black"
									}, 1000 );
								}
					}*/

		/*//move up 1
		var topDiv = nID;
		topDiv = topDiv.match(/d+/g).map(Number);
		topDiv = topDiv -100;
		topDiv = "r" + topDiv;

		var tDiv = document.getElementById(topDiv);
		if (tDiv.style.backgroundColor == "red"){
				$(this).each(function(){
					machine.push(this.id);
				});
				$(tDiv).animate({
						backgroundColor: "white"
				}, 1000 );
				$(tDiv).animate({
						backgroundColor: "black"
				}, 1000 );
				secondDiv = nextDiv.nextSibling;
		}*/
}

//check length of machine
/*if(machine.length >= 4){
	var nxtMachine;

	nxtMachine = (this.id);
	nxtMachine = document.getElementById(nxtMachine);

	$(nxtMachine).animate({
					backgroundColor: "white"
			}, 1000 );
	$(nxtMachine).animate({
					backgroundColor: "black"
			}, 1000 );
	var prevDiv = nxtMachine.previousSibling;
	//replicate next machine
	replicate(nxtMachine,prevDiv,nxtMachine);
}*/
for(var i=0; i<=IDs.length; i++){
	var redD = IDs[i+1];
	redD = document.getElementById(redD);
	if(redD.style.backgroundColor == "red"){
		$(redD).each(function(){
			redDivs.push(this.id);
		});
	}
}
</script>
</body>
</html>